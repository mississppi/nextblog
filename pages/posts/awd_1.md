---
title: "VPCを作成してEC2へSSH構築してみた"
published: 2020-09-21
category: aws
---

今日は EC2 を使って、SSH 接続までの流れを書いて行きます。

## 大まかな流れ

1. VPC の作成
2. EC2 の作成
3. IGW の作成
4. ルートの追加

### VPC の作成

今回は以下としました。

VPC の ipv2cidr: 192.168.0.0/16
サブネット: 192.168.1.0/24

### EC2 の作成

無料枠で作成。

### IGW の作成

現段階では外部と通信できない。ルーターに接続する設定をする
(自動的に VPC 内に作成されている)

今回は IGW を設定しルータとの経路を作成しましょう。

手順としては、

・VPC メニューから、インターネットゲートウェイを選択
・作成メニューを進めて、VPC へアタッチ

### ルートの追加(テーブルを編集する)

対象のサブネットを選択して、ルートテーブルタブを開きます。  
ルートテーブルのリンクをクリックして、対象のルートテーブル画面へ繊維します。

#### 他のどのルートテーブルにもマッチしなかった場合のアドレスを設定

アドレスを 0.0.0.0/0 と設定

また、ターゲットを作成した gw を設定

こちらで、ssh の経路ができているはずなので 接続してみましょう

#### pem ファイルを利用して、ssh 接続するまで

```
chmod 400 hogehoge.pem

ssh -i "hogehoeg.pem" ec2-user@xx.xx.xxx.xxx
```
